# 3 numbers
# Дисплей на 3 числа (спец проект)

###### Version: 1.0.1

## Сборка

***Примечание:*** Моему другу досталась плата
от топливораздаточной колонки (ТРК) с тремя ЖК
дисплеями по 6 цифр. Даже если вам достанется
такая же, не уверен что битовая адресация
сегментов цифр будет такой же. Выкладываю это 
именно как **спец проект** под имеющуюся
специфическую плату.

#### Для сборки такого устройства нам понадобится:

- Плата **Arduino** (любая)
- Плата от **ТРК**
- Три термодатчика
  [**DS18B20**](http://arduino-diy.com/arduino-tsifrovoy-datchik-temperatury-DS18B20 "DS18B20").
  У друга есть теплица, поэтому, думаю он
  придумает где поместить датчики для замера
  температуры.
- **Резистор 10 kOm** для фоторезистора
- **Резистор 4.7 kOm** для термодатчиков
- Соединительные **провода**
- Монтажная плата (**Breadboard**) (Можно
  обойтись без монтажной платы соединив только
  проводами, это на ваше усмотрение и в зависимости
  от конструкции которую вы придумали)
- **Светодиоды** для подсветки дисплея
- **Резисторы 220 Om** для светодиодов

#### Плата ТРК
Сама плата выглядела так:
![Trk 1](doc/img/Trk1.jpg "Trk 1")
![Trk 2](doc/img/Trk2.jpg "Trk 2")

Плата управлялась контроллером:
![Trk Chip](doc/img/TrkChip.jpg "Trk Chip")

Перепрограммировать эту микросхему теоретически
возможно, но нужно искать программатор и потом
разбираться как это делать, поэтому я ее извлек и
подключил контакты Arduino к ее контактам.
Arduino управляет четырьмя микросхемами
[*AY0438*](doc/AY0438.pdf "LCD Driver")
которые формируют изображение на дисплеях.


#### Схема сборки

![Sheme 1](doc/img/Scheme1.jpg "Схема 1")


#### Получившееся устройство

![Dev 1](doc/img/Dev1.jpg "Устройство 1")
![Dev 2](doc/img/Dev2.jpg "Устройство 2")
![Dev 3](doc/img/Dev3.jpg "Устройство 3")
![Dev 4](doc/img/Dev4.jpg "Устройство 4")
![Dev 5](doc/img/Dev5.jpg "Устройство 5")


## Программа

Настройки программы вы можете сделать в файле
***Settings.h***
Там можно настроить к каким контактам Arduino
что подключено.

#### Временные характеристики микросхем управления дисплеем
<table>
    <tr>
        <th>Назначение</th>
        <th>Символ</th>
        <th>Min</th>
        <th>Max</th>
        <th>Величина</th>
    </tr><tr>
        <td>Установка значения</td>
        <td align="center">tDS</td>
        <td align="right">150</td>
        <td align="right">--</td>
        <td align="center">nsec</td>
    </tr><tr>
        <td>Время хранения значения</td>
        <td align="center">tDH</td>
        <td align="right">50</td>
        <td align="right">--</td>
        <td align="center">nsec</td>
    </tr><tr>
        <td>Применение сформированого значения</td>
        <td align="center">tPW</td>
        <td align="right">175</td>
        <td align="right">--</td>
        <td align="center">nsec</td>
    </tr><tr>
        <td>Ожидание следующего значения</td>
        <td align="center">tPD</td>
        <td align="right">--</td>
        <td align="right">500</td>
        <td align="center">nsec</td>
    </tr>
</table>

#### Формирование значений
Для формирования знаков на дисплее нужно
просуммировать шестнадцатеричные номера нужных
сегментов. Номера приведены на рисунке:

![Segments](doc/img/Segments.jpg "Сегменты")
